## 一. 实验名称

​	生产者消费者问题



## 二. 实验目的

​	巩固操作系统信号量机制的相关知识，在Windows平台上利用进程模拟消费者和生产者，解决生产者消费者问题。



## 三. 实验原理

- 生产者消费者问题

  ​	**生产者消费者问题描述了共享固定大小缓冲池的多个“生产者”和“消费者”，在实际运行时会发生的问题**。“生产者”随机等待一定时间，往缓冲池中添加数据，“消费者”随机等待一定时间，从缓冲池中读取数据。若缓冲池已满，“生产者”需等待“消费者”读取数据后再添加，若缓冲池已空，“消费者”需等待“生产者”添加数据后再读取。**在生产者消费者问题中，需要注意**：（1）同一时刻，缓冲池只能被一个“生产者”或“消费者”占用，这是为了避免多个“生产者”或“消费者”同时访问缓冲池造成混乱（2）“生产者”必须等待缓冲池中有空缓冲区时，才能占用空闲缓冲池，往空缓冲区中添加数据，“消费者”必须等待缓冲池中有满缓冲区时，才能占用空闲缓冲池，从满缓冲区中读取数据，这是为了避免“死锁”的发生。比如，某一时刻缓冲池中所有缓冲区均空，且缓冲池空闲，若“消费者”此时占用空闲缓冲池，然后发现缓冲池中没有满缓冲区，于是等待“生产者”往缓冲池中添加数据，尽管此时缓冲池中有空缓冲区，但由于“消费者”占用了缓冲池，导致“生产者”没法往缓冲池中添加数据，于是“生产者”等待“消费者”释放对缓冲池的占用权，二者相互等待，陷入了“死锁”。

- 信号量

  ​	**信号量常用于进程间的同步与互斥，信号量机制是解决互斥共享资源的同步问题而引入的机制**。信号量的工作机制如下：当有进程申请使用共享资源时，先将当前共享资源的信号量值减1，若信号量值仍大于等于0，则进程可以使用共享资源，若信号量值小于0，则阻塞当前进程，将其加入等待队列。当进程使用完共享资源后，将当前共享资源的信号量值加1，若信号量值小于等于0，则唤醒等待队列中的队头进程，使用共享资源。上述将信号量值减1的操作是信号量的P操作，将信号量值加1的操作是信号量的V操作，信号量的P，V操作均是原语操作，在执行过程中不允许中断。